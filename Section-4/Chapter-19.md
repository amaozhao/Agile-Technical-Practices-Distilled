# C队的故事
> 你有你的方式。我有我的办法。至于正确的方式，正确的方式，唯一的方式，它是不存在的。
>
> -- 弗雷德雷西尼采

想象一下，你在一个大团队中，没有强有力的领导，每个人都朝着不同的方向前进。只有少数人似乎能够达成协议，拥有和分享原则，并讨论如何最好地应用它们以实现集体利益。他们花费数小时互相帮助，经常在相同的代码上结对。但他们是少数，并且在很大程度上被自负和想成为英雄的人所取代。

然而，事实与少数人有关，随着时间的推移逐渐赢得尊重。但远未产生他们想要的影响，整个团队仍然没有提供质量和数量，被无法达成的共识和不可避免的不断增长的技术债务所扼杀。

然后，想象有一天他们告诉你，“如果我们在四个月内没有交付重要的东西，我们的项目将被业务抛弃。选择你想要的人并建立一个新团队来交付一个全新的待办事项。但是你必须快点做。”

绝望使不可思议的事情成为可能。你会怎么做？你会接受挑战吗？你会怎么做？

这是当 Eldon 和我 (Marco) 获得启动“C 组”的绿灯时发生的故事，当时我们提出了在项目“红旗”时保存项目的计划。

> 笔记
>
> Team C 和红旗是我们工作的公司环境的线索。我们没有选择这个名字——我们是一个新的微型团队，由两个主要团队的骨干组成：Team A 和 Team B。因此，我们是团队 C。这不仅说明了开发团队内部的个性，而且说明了整个公司环境中的个性。

## 地形改造

Eldon：“他们答应了，我们甚至可以雇佣两个新人！”
我：“你在开玩笑吗，伙计？”
埃尔登：“说真的。我已经认识一个非常适合我们并且可以来加入我们的人。你自己认识任何人吗？”
我：“实际上，我确实认识一个了不起的人，他知识渊博，谦虚，过去曾与我一起工作，正在寻找一些东西……”
招聘就在那里进行了分类——实用主义的本质。我为拥有一个由受人尊敬且知识渊博的团队成员组成的良好网络感到自豪，他们喜欢与我一起工作并愿意再次这样做：

Eldon：“但我们还必须选择一名测试人员和一名业务分析师；这在业务团队中被认为是强制性的。”
我：“让我们找一个乐于学习新东西并使团队愉快的人。”
埃尔登：“当然。”
我：“我敢打赌，我可以在几周内直接在代码中编写验收标准，让他们跟上进度。”
埃尔登：“我想看看！这并不容易，但这会是一个成功的机会。让我们试试吧！”

## 团队建设
当我们选择业务分析师 (BA) 和测试员时，我们首先与他们交谈，看看他们是否愿意与我们合作。感到他们真的对此感到非常兴奋，但也有点害怕：

- BA：“从来没有人向我解释过积压工作，而且我才来这里几个月，所以我不能说我真的很了解这项业务。你真的确定我能帮上忙吗？也许其他人更有经验企业会知道更多的东西！”
- 我：“我的印象是这里没有人真正懂这个业务。我觉得有两种人：一种是假装知道的，一种是表示怀疑的。我们更喜欢第二种人。我们会深入研究将业务知识作为一个团队一起学习，直到我们获得所需的理解。”
- 测试员：“伙计们，我得提前告诉你们，我以前从来没有这样工作过，不知道我是否符合你们的期望？”
- 我：“别担心，只要你有信心自己尝试，我们就会和你配对。我们保证你永远不会被忽视，你可以随时找我们中的一个寻求帮助。”
- 测试人员：“这让我感觉好多了，但我这辈子从来没有写过代码。”
- Eldon：“你不需要真正实现任何东西。这只是关于学习一种非常简单的替代方法来用简单的英语写作。我保证一旦我展示给你，一切都会变得不那么可怕。”
- 测试者：“但是，我的意思是，你确定我学得够快吗？”
- 我：“听着，我 9 岁的时候就学会了写代码。你知道那是什么意思吗？”
- 测试者：“你真的很聪明。”
- 我：“不，错误的答案。这意味着它并不难！至少对于你的任务所需的水平。相信我，几周后你会因为这种恐惧而大笑。”

> 笔记
>
> 我最不喜欢指责文化的环境是它使风险厌恶情绪蔓延并在几乎每个人中根深蒂固。我记得当我还是一名年轻的开发人员时，我经常在执行一些微妙的任务时感到害怕，直到我与 Matteo 进行了一次启发性的对话——就是在设计模式课程中提到的那个人。当我不得不在实时数据库中进行更新时（让我们跳过原因）感受到我情绪激动的状态，他告诉我：“放松，伙计，你不是在某人心脏上进行手术的心脏外科医生。没有人会去”那是我随着时间的流逝而内化的智慧之珠，当我现在从栅栏的另一边看到同样的情况时，我会用同样的笑话。

做好工作的基础就在那里：团队中的每个人都相互信任，我们知道这些小小的恐惧只是表明他们希望尽可能高效，并且首先专注于共同目标.有了这些前提，我们可以走得更远。

## 积压工作：为早餐加工知识
我们做的第一件事显然是开始研究积压工作。我们很快意识到这不值得——它完全无法解读。我们很快就向 BA 寻求帮助，但我们与他们交谈的越多，我们就越意识到他们在模仿别人所说的话。是的，那个地方很大。充满了人员、程序、中间人和约束。我们决定我们必须处理正常职责的做法，并转向系统紧急情况的做法。

因此，一天早上，我们邀请了所有相关的利益相关者（用户、BA 和许多其他人）与我们的团队在同一个房间里进行史诗般的故事地图会议。我们所有的关键人物都准备好回答我们所有的问题。所有的 BA，包括其他团队的 BA，也都在场，这样他们也可以澄清他们的理解。

首先，我们确定了我们的角色，因为这是我们头脑中最模糊的概念之一。这为事物提供了新的视角，许多“啊哈”、“我明白了”和“这就是为什么”的时刻很快跟进。讨论非常有趣，在某个时候，对话被我们的协助劫持并由利益相关者和各种业务参与者自己独立进行，这真是太好了。每个人都对了解更多其他人的工作方式以及他们这样做的原因感到兴奋。多么了不起的集体学习经历！

到下午 1 点我们已经建立了完整的高级领域知识，并回答了所有问题。这使我们能够将积压的故事组合成一个逻辑顺序。只有实现细节仍然隐藏在旧的需求中，但还有时间讨论细节。经过半天的用户故事映射，我们准备开始了！

## 开裂

刚开始的时候我们只是一个四人团队，我们不得不等待几天才能让两个新成员加入。 Eldon 和我决定拆分工作并处理两项最关键的任务——各一项任务。

当他设置行走骨架并寻找将我们的新 REST API 与我们因身份验证和登录目的而不得不与之通信的遗留系统无缝集成的最佳方法时，我负责处理目标的需求构建适当的验收测试自动化套件。这还包括指导 BA 和测试员——在我看来，这是工作中最微妙的部分。我已经和他们承诺了，我不能让他们失望。

出现了关于行为驱动开发 (BDD) 框架的典型讨论，但为团队使用新框架的过程必须经过官僚主义和中层管理——这是我们想要避免的，因为时间不在我们这边。此外，我们对现有框架有不同的看法，我们认为付出的努力可能不值得。

一段时间以来，我一直在酝酿一个想法，我与 Eldon 分享了它：“听着，给我一天时间尝试一下，看看我们是否足够喜欢它。” EasyBdd 就是这样诞生的。经过一个上午的工作，我们一起回顾了它，我们稍微调整了一下，我们就爱上了它。我们相信 BA 和测试人员可以通过一些练习来解决这个问题。

从那时起，我花了接下来的两周时间进行 mob 编程，处理积压的最初故事，我左边是 BA，右边是测试员。我们定义了验收标准，经常与业务用户交谈，使用 EasyBdd 在代码中编写标准。

以身作则的教学如此强大；第二周之后，BA和测试人员就不用再问我们开发者了。他们就像经验丰富的 XP 从业者一样配对，提出了比我们所能处理的更多的要求和验收标准，并且具有我后来几乎没有再发现的清晰程度和对细节的关注。

测试人员在解决方案中编写验收标准，甚至学会了有效使用基本的源代码控制命令。我们曾经经常一起开玩笑，我告诉他，“你看，在你的下一份工作中，你可以转行并申请开发人员角色！”

在他们怀疑之后，看着他们这样一起工作，这是我想留在心里的那段经历的主要画面。

## 从形成到表演
当一个有共同目标的团队中存在团队精神时，就没有风暴阶段。在 Team C 中，我们从未有过这样的经历。我们确切地知道我们认为什么是重要的，并从第一天起就与大家分享。在现场进行初步指导后，其他两名团队成员到达，从那时起，用户故事开始在看板上飞舞。

我们与利益相关者定期进行产品演示，每次都由团队 C 的不同成员领导。那些没有参加会议的人在他们的办公桌前处理积压工作。

专注和承诺的水平非常出色。我们作为一个团队进行了多次讨论，但决策总是在几分钟内达成共识。我们信任每个成员为团队服务所提供的专业知识，总是愿意尝试更了解此事的人提出的建议。

我们还决定冒一些风险，结果意外地发现了一种新的、超快的工作方式：外部验收测试驱动开发 (ATDD) 开发，带有可选的内部单元测试周期。

## 带有可选单元测试的外向内 ATDD

我的建议背后的想法非常简单，它在很大程度上依赖于开发人员的经验，在这种情况下是非常高的。为了有效，它需要能够自然地编写由外而内的可测试代码，而不需要测试来驱动任何类。

基本上，如果我们有一套非常好的验收测试，就像我们在 Team C 中构建的那样，代码中的任何错误都可以追溯到几个损坏的单元，并且总是至少有一个损坏的验收。因此，验收测试将是我们可以编写的最少测试数量，以便让安全网络重构我们代码的任何部分。

所以，我建议，“为什么我们不打破完全测试覆盖的教条并停止执行单元测试，因为我们已经有了验收保护伞？如果我们编写可测试的代码，有什么问题？如果在某些时候我们感觉像一个类将从单元测试中受益，它很容易添加。优点是我们在重构阶段将有更多的自由，每次在测试端修复的移动部件更少。我们不需要很多测试来开发由外而内的方法；毕竟一个就足够了。我在做单独的项目时总是这样做，它让我很快。我们为什么不试试呢？

由此产生的讨论具有挑战性，但并不教条。毕竟，我们没有太多时间，我们都知道自己在做什么，而这项技术可以证明自己是一个巨大的胜利。根据开发人员的判断，我们很快就单元测试达成了共识。

> 笔记
>
> 我们决定尝试这个实验主要是因为团队的所有四名成员都非常有经验，并且在任何情况下，自然会在不需要测试的情况下在外部编写代码。此外，他们的成熟度足够高，以至于当他们认为测试有价值时，他们决定增加测试。在不掌握由外而内开发的情况下，作为一个团队尝试这种技术时要非常小心。

## 绿旗
这项技术表明自己非常成功。在第一个半月之后，我们的系统已经处于良好状态。业务利益相关者简直不敢相信自己的眼睛。终于，多年后，部署了一些真正有效的东西，并且它稳步增长，一个又一个功能，没有缺陷。又过了几个月（按照旧团队的标准，这是创纪录的时间），我们已经成功实施了我们负责的整个积压工作。

几周后，没有人敢赌一毛钱的消息传来：该项目已被标记为绿色。我们确保整个团队的预算可以再用一年。我们使几个月前看似不可能的事情成为可能。

我们应用的技术技能，以及本书中描述的经验和原则，都非常重要。我们使用卓越的验收测试套件和对干净代码、SOLID 原则和简单设计的狂热关注来平衡风险缓解和开发速度。

编写该代码是纯粹的快乐，直接结果是真正的集体代码所有权。任何人都可以很容易地找出在代码中的什么地方可以得到想要的结果。其他小队好奇的小伙伴经常会问能不能看到，好像是什么吸引人似的：“哇，好简单好懂啊！”

## 这个故事的主旨
然而，我们在那个时候实现了相当大的目标的真正原因不仅仅是技术方面。只有因为我们建立了一个功能齐全的团队，每个人都在努力满足彼此的需求，才能充分发挥个人的巨大潜力。

我们从不厌倦互相解释事情，尝试别人引起他人共鸣的新想法，并且在每次有人需要时互相帮助。我们是一个由仆人式领导组成的团队，信任、支持和同理心是自然而然的。我们从不互相指责，我们一起审查了好几次改进点，而没有任何人觉得自己对一段代码有兴趣。多么幼稚的概念；这不是我的代码或他的代码——它是我们的。

创建一个真正无私协作的环境，让每个人都可以自由地尝试想法，从而获得令人敬畏的知识和技术实施突破。它还使团队能够在需要时通过分享能力来超越个人的极限，因为没有人害怕提出问题、揭示他们被卡住或不知道什么。这样的环境使每个人都能在任何情况下有效地利用整个团队的知识，因为每个人都知道最好的解决方案总是只是一个快速的问题。

这是其他团队真正缺少的因素，太多的自尊心发生冲突，争先恐后地按照自己的方式做事，而不是开放地信任彼此，而不关心是谁提出了这个想法或那个解决方案。

我们建立了一个功能齐全、高效的社会技术系统，远远超过了个人技能的总和。如果你考虑一下，那是系统的主要一般属性之一。正如我们从戴明那里了解到的那样，我们 95% 的表现都依赖于此。这就是Team C的真正秘密。

> 笔记
>
> 威廉·爱德华兹·戴明（William Edwards Deming），“事实上，人们工作的系统和与人的互动可能占绩效的 90% 或 95%。”